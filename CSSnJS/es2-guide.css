  :root {
    /* ── Base UI palette ── */
    --bg:          #050810;
    --surface:     #09111f;
    --card:        #0d1a2e;
    --card2:       #0a1520;
    --border:      #162540;
    --text:        #b8ccE4;
    --text-bright: 238, 246, 255;
    --text-dim:        #B8ccE47F;

    /* ── Semantic fixed colors (role-based, not accent) ── */
    --green:       29,185,106;
    --green-dim:   rgba(var(--green), 0.10);
    --red:         232,64,64;
    --red-dim:     rgba(var(--red), 0.10);
    --gold:        232,160,32;
    --gold-dim:    rgba(var(--gold), 0.12);
    --purple:      139,92,246;
    --purple-dim:  rgba(var(--purple), 0.12);
    --cyan:        0,212,255;
    --cyan-dim:    rgba(var(--cyan), 0.10);

    /* ── Per-volume accent colors (RGB triplets for rgba() composition) ──
     * | Vol.0 | `--vol0-accent` | `--vol0-accent-rgb` | Teal-green #00c9a7 |
     * | Vol.1 | `--vol1-accent` | `--vol1-accent-rgb` | Light salmon #FFA07A |
     * | Vol.2 | `--vol2-accent` | `--vol2-accent-rgb` | Gold #e8a020 |
     * | Vol.3 | `--vol3-accent` | `--vol3-accent-rgb` | Blue #2d8fff |
     * | Vol.4 | `--vol4-accent` | `--vol4-accent-rgb` | Red #e84040 |
     * | Vol.5 | `--vol5-accent` | `--vol5-accent-rgb` | Mint #00d4a0 |
     * | Vol.6 | `--vol6-accent` | `--vol6-accent-rgb` | Purple #8b5cf6 |
     * | Vol.7 | `--vol7-accent` | `--vol7-accent-rgb` | Cold cyan #00e5ff |
     * | Vol.8 | `--vol8-accent` | `--vol8-accent-rgb` | Pale Sacred Gold #e8d48b |
     *    ── */
    --vol0-accent:     0,201,167;
    --vol1-accent:     255,160,122;
    --vol2-accent:     28, 219, 12;
    --vol3-accent:     45,143,255;
    --vol4-accent:     232,64,64;
    --vol5-accent:     232,160,32;
    --vol6-accent:     139,92,246;
    --vol7-accent:     0,229,255;
    --vol8-accent:     232,212,139;

    /* ── Default accent (overridden per-volume in each HTML <style>) ── */
    --accent:     var(--vol4-accent);
    --accent-dim: rgba(var(--accent), 0.12);

    /* ── Nav colors derived from accent ── */
    --nav:        rgba(var(--accent), 0.97);
    --nav-bright: rgba(var(--accent), 0.97);
    --muted:      rgba(var(--accent), 0.97);

    --glow-blue: 0 0 30px rgba(var(--accent), 0.20);
	/* Text sizes */
	--ts_mainText:18px;
	--ts_pageTitle:calc(var(--ts_mainText) * 1.8);
	--ts_topicTitle:calc(var(--ts_mainText) * 1.1);
	--ts_sectionTitle:calc(var(--ts_mainText) * 0.6);
	--ts_sectionLabel:calc(var(--ts_mainText) * 0.9); 
	--ts_blockTitle:var(--ts_topicTitle);
	--ts_progressMini:var(--ts_sectionTitle);
	--ts_breadcrumb:var(--ts_sectionLabel);
	--ts_callout:var(--ts_mainText);
	--ts_table:var(--ts_sectionLabel);
	--ts_quizTitle:var(--ts_sectionLabel);
	--ts_logoText:var(--ts_sectionLabel);
	--ts_quizQuestion:var(--ts_sectionLabel);
	--ts_quizSmall:var(--ts_sectionTitle);

    /* ── Faction identity colors ── */
    --lumeris-color:        232,160,32;
    --ue-color:             192,57,43;
    --vodyani-color:        255,107,26;
    --riftborn-color:       0,229,255;
    --sophon-color:         45,143,255;
    --cravers-color:        68, 108, 36;
    --hissho-color:         232,64,64;
    --horatio-color:        240,168,208;
    --unfallen-color:       29,185,106;
    --umbral-color:         139,92,246;
    --vaulters-color:       0,201,167;
    --nakalim-color:        232,212,139;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Rajdhani', sans-serif;
    font-size: var(--ts_mainText);
    line-height: 1.6;
    min-height: 100vh;
  }

  /* Starfield bg */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse 60% 40% at 20% 50%, rgba(var(--accent), 0.04) 0%, transparent 70%),
      radial-gradient(ellipse 50% 30% at 80% 20%, rgba(var(--purple), 0.04) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }

  .layout {
    display: flex;
    min-height: 100vh;
    position: relative;
    z-index: 1;
  }

  /* ── Volume cards effects ──────────────────────────────────── */
  .vol-card {
    display: flex;
    align-items: center;
    gap: 18px;
    padding: 16px 20px;
    border-radius: 8px;
    border: 1px solid transparent;
    background: transparent;
    cursor: pointer;
    text-decoration: none;
    transition: background 0.18s, border-color 0.18s, transform 0.15s;
    margin-bottom: 8px;
    position: relative;
    overflow: hidden;
  }

  .vol-card::before {
    content: '';
    position: absolute;
    top: 0; bottom: 0;
    width: 3px;
    background: rgb(var(--card-accent));
    opacity: 0;
    transition: opacity 0.18s;
  }

  .vol-card.right::before
  {
    right: 0;
  }

  .vol-card.left::before
  {
    left: 0;
  }

  .vol-card:hover {
    background: rgba(var(--card-accent), 0.07);
    border-color: rgba(var(--card-accent), 0.25);
    transform: translateX(-4px);
  }

  .vol-card:hover::before {
    opacity: 1;
  }

  .vol-card-emoji {
    font-size: calc(var(--ts_mainText) * 1.5);
    flex-shrink: 0;
    width: 40px;
    text-align: center;
    filter: drop-shadow(0 0 6px rgba(var(--card-accent), 0.4));
    transition: filter 0.18s;
  }

  .vol-card:hover .vol-card-emoji {
    filter: drop-shadow(0 0 10px rgba(var(--card-accent), 0.7));
  }

  .vol-card-text {
    flex: 1;
  }

  .vol-card-num {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_sectionTitle);
    color: rgb(var(--card-accent));
    letter-spacing: 2px;
    margin-bottom: 3px;
    opacity: 0.8;
  }

  .vol-card-title {
    font-family: 'Rajdhani', sans-serif;
    font-size: var(--ts_topicTitle);
    font-weight: 600;
    color: rgb(var(--text-bright));
    line-height: 1.2;
  }

  .vol-card-sub {
    font-family: 'Rajdhani', sans-serif;
    font-size: var(--ts_mainText);
    color: var(--text);
    line-height: 1.4;
    margin-top: 2px;
  }

  .vol-card-arrow {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_sectionLabel);
    color: rgb(var(--card-accent));
    opacity: 0;
    transform: translateX(-6px);
    transition: opacity 0.18s, transform 0.18s;
    flex-shrink: 0;
  }

  .vol-card:hover .vol-card-arrow {
    opacity: 1;
    transform: translateX(0);
  }
  
.vol-card-badge {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	font-family: 'Share Tech Mono', monospace;
	font-size: var(--ts_sectionLabel);
	letter-spacing: 2px;
	padding: 2px 10px;
	border-radius: 20px;
	border: 1px solid rgba(var(--card-accent), 0.3);
	background: rgba(var(--card-accent), 0.10);
	color: rgb(var(--card-accent));
	margin-bottom: 8px;
}  


  /* SIDEBAR NAV */
  .sidebar {
    width: 25%;
	max-width: 360px;
    flex-shrink: 0;
    background: var(--surface);
    border-right: 1px solid var(--border);
    position: sticky;
    top: 0;
	left: 0;
    height: 100vh;
    overflow-y: auto;
    padding: 24px 0;
  }

  .sidebar-logo {
    padding: 0 20px 24px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 20px;
  }


  .sidebar-logo .vol-card
  {
    --card-accent: var(--text-bright);
    border-color: rgb(var(--card-accent));
    transform: none;
  }

  a.linkToIndex, a.linkToIndex:visited   { color: rgb(var(--text-bright)); text-decoration: none;}

  .sidebar-logo a.linkToIndex
  {
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_pageTitle);
    display:block;
    float:left;
    margin-right: 10px;
    /*
    padding-right: 20px;
    margin-right: 20px;
    margin-bottom: 20px;
    margin-top: 10px;
    border-right: 2px solid silver;
    */
  }

  .sidebar-logo .game-name {
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_logoText);
    letter-spacing: 3px;
    color: rgb(var(--accent));
    margin-bottom: 4px;
  }

  .sidebar-logo .guide-name {
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_logoText);
    font-weight: 900;
    color: rgb(var(--text-bright));
    line-height: 1.2;
  }

  .nav-section-label {
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_sectionTitle);
    letter-spacing: 3px;
    color: var(--nav-bright);
    text-transform: uppercase;
    padding: 0 20px 8px;
    margin-top: 12px;
  }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 20px;
    cursor: pointer;
    font-size: var(--ts_sectionLabel);
    font-weight: 500;
    color: var(--nav);
    transition: all 0.15s;
    border-left: 2px solid transparent;
    /*user-select: none;*/
  }

  .nav-item:hover { color: var(--text); background: var(--accent-dim); }
  .nav-item.active { color: rgb(var(--accent)); border-left-color: rgb(var(--accent)); background: var(--accent-dim); }
  .nav-item.done-nav { color: rgb(var(--green)); }
  .nav-item .nav-check { font-size: var(--ts_sectionTitle); margin-left: auto; }

  .progress-mini {
    margin: 20px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
  }

  .progress-mini-label {
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_progressMini);
    letter-spacing: 2px;
    color: var(--nav-bright);
    margin-bottom: 6px;
    display: flex;
    justify-content: space-between;
  }

  .progress-mini-bar {
    background: var(--border);
    height: 4px;
    border-radius: 99px;
    overflow: hidden;
  }

  .progress-mini-fill {
    height: 100%;
    background: linear-gradient(90deg, rgb(var(--purple)), rgb(var(--accent)));
    transition: width 0.5s ease;
    box-shadow: 0 0 8px rgba(var(--accent), 0.50);
  }

  
  /* old style
  .vol-link{
    margin: 8px 20px 0;
    padding: 10px 14px;
    border-radius: 6px;
    font-family: 'Share Tech Mono', monospace;
    cursor: pointer;
    font-size:var(--ts_sectionLabel);
  }
  */
  .sidebar .vol-card.vol-next, .sidebar .vol-card.vol-prev
  {
    font-size:var(--ts_sectionLabel);
    font-family: 'Share Tech Mono', monospace;
    width:80%;
    margin:auto;
    margin-top: 10px;
    color: rgb(var(--card-accent));
    border-color: rgb(var(--card-accent));
  }
  
  .sidebar .vol-card.linkToIndex
  {
	  --card-accent:var(--text-bright);
  }


  /* MAIN */
  .main {
    flex: 1;
    min-width: 0;
    padding: 40px 48px;
    width: 70%;
  }

  /* PAGE HEADER */
  .page-header {
    margin-bottom: 48px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border);
  }

  .breadcrumb {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_breadcrumb);
    color: var(--text-dim);
    letter-spacing: 1px;
    margin-bottom: 16px;
  }

  .breadcrumb span { color: rgb(var(--accent)); }
  
  .breadcrumb #navHider
  {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_topicTitle);
    color: rgb(var(--accent));
    background: var(--accent-dim);
    border: 1px solid rgba(var(--accent), 0.30);
    padding: 3px 10px;
    border-radius: 4px;
	display: inline;
  }

  h1.page-title {
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_pageTitle);
    font-weight: 900;
    color: rgb(var(--text-bright));
    line-height: 1.1;
    margin-bottom: 12px;
    text-shadow: 0 0 30px rgba(var(--accent), 0.30);
  }

  .page-subtitle {
    font-size: var(--ts_mainText);
    color: var(--text);
    /*max-width: 560px;*/
    line-height: 1.6;
  }


  /* TOPIC SECTIONS */
  .topic {
    margin-bottom: 48px;
    scroll-margin-top: 24px;
  }

  .topic-header {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    margin-bottom: 20px;
  }

  .topic-num {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_topicTitle);
    color: rgb(var(--accent));
    background: var(--accent-dim);
    border: 1px solid rgba(var(--accent), 0.30);
    padding: 3px 10px;
    border-radius: 4px;
    flex-shrink: 0;
    margin-top: 6px;
  }

  h2.topic-title {
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_topicTitle);
    font-weight: 700;
    color: rgb(var(--text-bright));
    line-height: 1.3;
    margin-bottom: 4px;
  }

  .topic-subtitle {
    font-size: var(--ts_mainText);
    color: var(--text);
  }

  /* CONTENT BLOCKS */
  .content-block {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 16px;
  }

  .block-header {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    /*user-select: none;*/
    transition: background 0.15s;
  }

  .block-header:hover { background: rgba(255,255,255,0.02); }

  .block-icon {
    font-size: var(--ts_blockTitle);
    flex-shrink: 0;
  }

  .block-title {
    font-size: var(--ts_blockTitle);
    font-weight: 600;
    color: rgb(var(--text-bright));
    flex: 1;
  }

  .block-tag {
    font-family: 'Share Tech Mono', monospace;
    font-size: calc(var(--ts_blockTitle) * 0.8);
    padding: 2px 8px;
    border-radius: 3px;
    flex-shrink: 0;
  }

  .tag-mech { background: var(--accent-dim); color: rgb(var(--accent)); border: 1px solid rgba(var(--accent), 0.25); }
  .tag-strategy { background: var(--purple-dim); color: rgb(var(--purple)); border: 1px solid rgba(139,92,246,0.25); }
  .tag-mistake { background: var(--red-dim); color: rgb(var(--red)); border: 1px solid rgba(232,64,64,0.25); }
  .tag-advanced { background: var(--gold-dim); color: rgb(var(--gold)); border: 1px solid rgba(232,160,32,0.25); }

  .block-chevron {
    color: var(--muted);
    transition: transform 0.25s;
    flex-shrink: 0;
    font-size: var(--ts_mainText);
  }

  .content-block.open .block-chevron { transform: rotate(180deg); }

  .block-body {
    display: none;
    padding: 20px;
  }

  .content-block.open .block-body { display: block; }

  /* Text styles inside blocks */
  .block-body p {
    font-size: var(--ts_callout);
    color: var(--text);
    line-height: 1.8;
    margin-bottom: 14px;
  }

  .block-body p:last-child { margin-bottom: 0; }

  .block-body strong { color: rgb(var(--text-bright)); font-weight: 600; }

  /* Callout boxes */
  .callout {
    border-radius: 6px;
    padding: 14px 16px;
    margin: 14px 0;
    font-size: var(--ts_callout);
    line-height: 1.7;
  }

  .callout-how {
    background: var(--green-dim);
    border-left: 3px solid rgb(var(--green));
    color: var(--text);
  }

  .callout-how .callout-label {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_callout);
    color: rgb(var(--green));
    letter-spacing: 2px;
    margin-bottom: 6px;
  }

  .callout-warn {
    background: var(--red-dim);
    border-left: 3px solid rgb(var(--red));
    color: var(--text);
  }

  .callout-warn .callout-label {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_callout);
    color: rgb(var(--red));
    letter-spacing: 2px;
    margin-bottom: 6px;
  }

  .callout-tip {
    background: var(--accent-dim);
    border-left: 3px solid rgb(var(--accent));
    color: var(--text);
  }

  .callout-tip .callout-label {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_callout);
    color: rgb(var(--accent));
    letter-spacing: 2px;
    margin-bottom: 6px;
  }

  .callout-gold {
    background: var(--gold-dim);
    border-left: 3px solid rgb(var(--gold));
    color: var(--text);
  }

  .callout-gold .callout-label {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_callout);
    color: rgb(var(--gold));
    letter-spacing: 2px;
    margin-bottom: 6px;
  }

  /* Reference tables */
  .ref-table {
    width: 100%;
    border-collapse: collapse;
    font-size: var(--ts_table);
    margin: 14px 0;
    border: 1px solid var(--border);
  }

  .ref-table th {
    font-family: 'Share Tech Mono', monospace;
    /*font-size: 10px;*/
    letter-spacing: 2px;
    color: var(--muted);
    text-align: left;
    padding: 6px 12px;
    border-bottom: 1px solid var(--border);
    background: var(--card2);
    text-transform: uppercase;
  }


  .ref-table th.tableTitle
  {
    text-align:center;
  }


  .ref-table td {
    padding: 8px 12px;
    border-bottom: 1px solid var(--border);
    color: var(--text);
    vertical-align: center;
  }

  .ref-table tr:last-child td { border-bottom: none; }
  .ref-table tr:hover td { background: rgba(255,255,255,0.02); }

  .cell-key { color: rgb(var(--text-bright)); font-weight: 600; }
  .cell-good { color: rgb(var(--green)); }
  .cell-bad { color: rgb(var(--red)); }

  /* Step list */
  .step-list {
    list-style: none;
    margin: 12px 0;
  }

  .step-list li {
    display: flex;
	align-items: center;
    gap: 12px;
    margin-bottom: 10px;
    font-size: var(--ts_mainText);
    line-height: 1.7;
    color: var(--text);
  }

  .step-list li .step-n {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_mainText);
    color: rgb(var(--accent));
    background: var(--accent-dim);
    border-radius: 3px;
    padding: 2px 7px;
    flex-shrink: 0;
    height: fit-content;
    margin-top: 3px;
  }

  /* Mark done */
  .done-row {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 12px;
    padding-top: 16px;
    margin-top: 16px;
    border-top: 1px solid var(--border);
  }

  .done-label {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_callout);
    color: var(--muted);
    letter-spacing: 1px;
  }

  .done-btn {
    background: transparent;
    border: 1px solid rgb(var(--green));
    color: rgb(var(--green));
    border-radius: 4px;
    padding: 5px 14px;
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_callout);
    letter-spacing: 2px;
    cursor: pointer;
    transition: all 0.15s;
  }

  .done-btn:hover { background: var(--green-dim); }
  .done-btn.marked { background: var(--green-dim); color: rgb(var(--green)); cursor: default; pointer-events: none; }

  /* Divider */
  .topic-divider {
    border: none;
    border-top: 1px solid var(--border);
    margin: 48px 0;
  }

  /* Quiz */
  .quiz-wrap {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 24px;
    margin-bottom: 48px;
  }

  .quiz-title-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border);
  }

  .quiz-title-bar .q-icon { font-size: var(--ts_topicTitle); }

  .quiz-title-bar h3 {
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_quizTitle);
    font-weight: 700;
    color: rgb(var(--text-bright));
    flex: 1;
  }

  .q-counter {
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_quizTitle);
    color: var(--muted);
  }

  .quiz-q {
    font-size: var(--ts_quizQuestion);
    color: rgb(var(--text-bright));
    line-height: 1.7;
    margin-bottom: 16px;
    font-weight: 500;
  }

  .quiz-scenario {
    background: var(--card2);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 12px 16px;
    font-size: var(--ts_quizQuestion);
    color: var(--text);
    line-height: 1.6;
    margin-bottom: 16px;
    font-style: italic;
  }

  .quiz-opts { display: grid; gap: 8px; margin-bottom: 16px; }

  .quiz-opt {
    background: var(--card2);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 11px 16px;
    cursor: pointer;
    font-size: var(--ts_quizQuestion);
    color: var(--text);
    text-align: left;
    font-family: 'Rajdhani', sans-serif;
    line-height: 1.5;
    transition: all 0.12s;
  }

  .quiz-opt:hover { border-color: rgb(var(--accent)); color: rgb(var(--text-bright)); }
  .quiz-opt.correct { border-color: rgb(var(--green)); background: var(--green-dim); color: rgb(var(--green)); }
  .quiz-opt.wrong { border-color: rgb(var(--red)); background: var(--red-dim); color: rgb(var(--red)); }

  .quiz-explain {
    font-size: var(--ts_quizQuestion);
    line-height: 1.7;
    padding: 12px 16px;
    border-radius: 6px;
    display: none;
    margin-bottom: 12px;
  }

  .quiz-explain.show { display: block; }
  .quiz-explain.ok { background: var(--green-dim); color: var(--text); border: 1px solid rgba(29,185,106,0.25); }
  .quiz-explain.bad { background: var(--red-dim); color: var(--text); border: 1px solid rgba(232,64,64,0.25); }

  .btn-next-q {
    display: none;
    background: rgb(var(--accent));
    color: #fff;
    border: none;
    border-radius: 5px;
    padding: 9px 20px;
    font-family: 'Orbitron', sans-serif;
    font-size: var(--ts_quizSmall);
    letter-spacing: 2px;
    cursor: pointer;
    transition: opacity 0.15s;
  }

  .btn-next-q:hover { opacity: 0.85; }
  .btn-next-q.show { display: inline-block; }

  /* Toast */
  .toast {
    position: fixed;
    bottom: 28px;
    right: 28px;
    background: var(--card);
    border: 1px solid rgb(var(--gold));
    border-radius: 7px;
    padding: 11px 18px;
    font-family: 'Share Tech Mono', monospace;
    font-size: var(--ts_callout);
    color: rgb(var(--gold));
    box-shadow: 0 0 20px rgba(var(--gold), 0.25);
    z-index: 999;
    transform: translateY(70px);
    opacity: 0;
    transition: all 0.35s cubic-bezier(0.34,1.2,0.64,1);
    pointer-events: none;
  }

  .toast.show { transform: translateY(0); opacity: 1; }

  /* Animations */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .topic { animation: fadeIn 0.5s ease both; }
  .topic:nth-child(2) { animation-delay: 0.05s; }
  .topic:nth-child(3) { animation-delay: 0.1s; }
  .topic:nth-child(4) { animation-delay: 0.15s; }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 5px; }
  ::-webkit-scrollbar-track { background: var(--surface); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 99px; }

  /* Hide mobile elements on desktop — must come BEFORE the media query
     so the @media rules below can override with display:flex/block */
  .mobile-bar,
  .mobile-drawer,
  .drawer-backdrop { display: none; }

  /* ── Mobile: bottom bar + slide-up drawer ─────────────────────────────── */
  @media (max-width: 700px) {

    /* Hide desktop sidebar entirely */
    .sidebar { display: none; }

    /* Main content full-width, padded at bottom to clear fixed bar */
    .main { width: 100%; padding: 24px 20px 100px; }

    /* Fixed bottom navigation bar */
    .mobile-bar {
      display: flex;
      position: fixed;
      bottom: 0; left: 0; right: 0;
      height: 58px;
      background: var(--surface);
      border-top: 1px solid var(--border);
      align-items: center;
      justify-content: space-between;
      padding: 0 12px;
      z-index: 200;
      gap: 8px;
    }

    .mobile-bar-vol {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 40px;
      border-radius: 6px;
      border: 1px solid rgba(var(--accent), 0.25);
      background: rgba(var(--accent), 0.08);
      color: rgb(var(--accent));
      font-family: 'Share Tech Mono', monospace;
      font-size: var(--ts_sectionTitle);
      letter-spacing: 1px;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      padding: 0 10px;
      transition: background 0.15s;
      user-select: none;
    }
    .mobile-bar-vol:hover  { background: rgba(var(--accent), 0.16); }
    .mobile-bar-vol.hidden { visibility: hidden; pointer-events: none; }

    .mobile-bar-menu {
      flex-shrink: 0;
      width: 44px;
      height: 40px;
      border-radius: 6px;
      border: 1px solid var(--border);
      background: var(--card);
      color: rgb(var(--text-bright));
      font-size: var(--ts_topicTitle);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.15s;
      user-select: none;
    }
    .mobile-bar-menu:hover { background: var(--card2); }

    /* Backdrop */
    .drawer-backdrop {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      z-index: 210;
    }
    .drawer-backdrop.open { display: block; }

    /* Slide-up drawer */
    .mobile-drawer {
      position: fixed;
      bottom: 58px; left: 0; right: 0;
      max-height: 72vh;
      background: var(--surface);
      border-top: 1px solid var(--border);
      border-radius: 14px 14px 0 0;
      z-index: 220;
      overflow-y: auto;
      padding: 8px 0 20px;
      transform: translateY(100%);
      transition: transform 0.28s cubic-bezier(0.32, 0.72, 0, 1);
    }
    .mobile-drawer.open { transform: translateY(0); display:block;}

    /* Drawer handle */
    .drawer-handle {
      width: 36px; height: 4px;
      background: var(--border);
      border-radius: 99px;
      margin: 8px auto 14px;
    }

    /* Drawer nav items reuse sidebar classes, just with touch-friendly sizing */
    .mobile-drawer .nav-section-label {
      font-size: var(--ts_sectionTitle);
      padding: 8px 20px 4px;
      margin-top: 8px;
    }
    .mobile-drawer .nav-item {
      font-size: var(--ts_sectionLabel);
      padding: 10px 20px;
      min-height: 44px;
    }
  }
  
  /* Faction identity badges */
  .faction-badge {
    display:inline-flex; align-items:center; gap:8px;
    padding:5px 14px; border-radius:20px; font-family:'Share Tech Mono',monospace;
    font-size:var(--ts_sectionLabel); letter-spacing:2px; margin-bottom:16px; font-weight:700;
  }
  .faction-rule {
    background:var(--card2); border:1px solid var(--border); border-radius:6px;
    padding:12px 16px; margin:10px 0; font-size:var(--ts_table); line-height:1.7;
  }
  .faction-rule .rule-label {
    font-family:'Share Tech Mono',monospace; font-size:var(--ts_sectionTitle); letter-spacing:2px;
    margin-bottom:4px; font-weight:700;
  }

  
  .badge-lumeris { background:rgba(var(--lumeris-color), 0.15); color:rgb(var(--lumeris-color)); border:1px solid rgba(var(--lumeris-color), 0.3); }
  .badge-ue      { background:rgba(var(--ue-color),      0.15); color:rgb(var(--ue-color));      border:1px solid rgba(var(--ue-color),      0.3); }
  .badge-vodyani { background:rgba(var(--vodyani-color), 0.15); color:rgb(var(--vodyani-color)); border:1px solid rgba(var(--vodyani-color), 0.3); }
  .badge-riftborn{ background:rgba(var(--riftborn-color),0.15); color:rgb(var(--riftborn-color));border:1px solid rgba(var(--riftborn-color),0.3); }
  .badge-sophon  { background:rgba(var(--sophon-color),  0.15); color:rgb(var(--sophon-color));  border:1px solid rgba(var(--sophon-color),  0.3); }
  .badge-cravers { background:rgba(var(--cravers-color), 0.15); color:rgb(var(--cravers-color)); border:1px solid rgba(var(--cravers-color), 0.3); }
  .badge-hissho  { background:rgba(var(--hissho-color),  0.15); color:rgb(var(--hissho-color));  border:1px solid rgba(var(--hissho-color),  0.3); }
  .badge-horatio { background:rgba(var(--horatio-color), 0.12); color:rgb(var(--horatio-color)); border:1px solid rgba(var(--horatio-color), 0.3); }
  .badge-unfallen{ background:rgba(var(--unfallen-color),0.15); color:rgb(var(--unfallen-color));border:1px solid rgba(var(--unfallen-color),0.3); }
  .badge-umbral  { background:rgba(var(--umbral-color),  0.12); color:rgb(var(--umbral-color));  border:1px solid rgba(var(--umbral-color),  0.3); }
  .badge-vaulters{ background:rgba(var(--vaulters-color),0.15); color:rgb(var(--vaulters-color));border:1px solid rgba(var(--vaulters-color),0.3); }
  .badge-nakalim { background:rgba(var(--nakalim-color), 0.12); color:rgb(var(--nakalim-color)); border:1px solid rgba(var(--nakalim-color), 0.3); }

  
